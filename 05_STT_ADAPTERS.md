# 05. STT 어댑터 설계 (교체 가능 구조)

## 목표
STT 제공자를 바꿔도 상위 로직(품질게이트/정규화/로그)이 흔들리지 않도록 어댑터 패턴을 사용한다.

> 본 STT 어댑터는 음성을 텍스트로 변환하는 역할만 수행하며,  
> 해당 텍스트를 실제 서비스 로직에서 처리할지 여부에 대한 판단은  
> `03_AI_QUERY_POLICY.md`에서 정의한 질문 허용 정책에 따라  
> 별도의 Policy Gate 단계에서 수행된다.


## 어댑터 인터페이스(권장)
- `transcribe(audio_path) -> {text_raw, confidence, lang, latency_ms}`

## 비교 대상(최소 2개)
- Whisper large-v3 (로컬/서버 배치)
- Google Speech-to-Text (batch, PoC 1차는 음성 파일 기반으로 수행)

## 선택 기준(기록 필수)
- 한국어/사투리/노이즈/짧은 발화에서 “의미 보존”
- 지연(p95), 비용(건당)
- 구현 난이도(키/권한/네트워크)

## 구현 팁(속도)
- PoC 초반은 batch(파일 업로드) 방식으로 시작
- Streaming은 2차 최적화(지연 목표가 빡빡할 때)
